rules_version = '2';
service firebase.storage {
  match /b/{bucketId}/o {
    // Match any file in the bucket
    match /{allPaths=**} {
      // Allow read/write access only if the user is authenticated
      // and the path starts with 'artifacts/{user_id}/' where user_id matches the authenticated user's ID.
      allow read, write: if request.auth != null && allPaths.matches('artifacts/' + request.auth.uid + '/.*');
    }
  }
}
